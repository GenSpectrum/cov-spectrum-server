version: '3'
services:

  server:
    image: registry.ethz.ch/sars_cov_2/cov-spectrum-server:latest
    container_name: cov-spectrum-server
    restart: unless-stopped
    environment:
      - COV_SPECTRUM_HOST=
      - COV_SPECTRUM_PORT=
      - COV_SPECTRUM_NAME=
      - COV_SPECTRUM_USERNAME=
      - COV_SPECTRUM_PASSWORD=

  website:
    image: registry.ethz.ch/sars_cov_2/cov-spectrum-website:latest
    container_name: cov-spectrum-website
    restart: unless-stopped

  nginx:
    image: nginx:stable
    container_name: cov-spectrum-nginx
    depends_on:
      - server
      - website
    restart: unless-stopped
    ports:
      - "7000:80"
    volumes:
      - ./nginx-cov-spectrum-compose.conf:/etc/nginx/conf.d/default.conf
